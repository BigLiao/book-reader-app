webpackJsonp([1],{"34KM":function(t,e){},"7tNi":function(t,e){},NHnr:function(t,e,i){"use strict";function s(t,e){return function(t,e){return new d.a(function(i,s){v.get(u+t,{params:e}).then(function(o){o.data.code===f?i(o.data):(console.error("接口数据返回失败："+o.data.msg+"\n地址："+t+"\n参数："+h()(e)),s(o.data.msg))}).catch(function(t){console.error(t)})})}("bookapi/getChapterInfo",{_csrfToken:"L8OQ51gXrh5Eo25lUFnjTSDFTxEJKzMIlfLmVdMo",bookId:t,chapterId:e})}Object.defineProperty(e,"__esModule",{value:!0});var o=i("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},a=i("VU/8")({name:"app"},n,!1,function(t){i("7tNi")},null,null).exports,r=i("/ocq"),c=(i("mtWM"),i("mvHQ")),h=i.n(c),l=i("//Fk"),d=i.n(l),v=i("mtWM"),f=0,u="/",p={name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}},created:function(){s(3516230,84376219).then(function(t){console.log(t)}).catch(function(t){console.log(t)})}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hello"},[i("h1",[t._v(t._s(t.msg))]),t._v(" "),i("h2",[t._v("Essential Links")]),t._v(" "),t._m(0,!1,!1),t._v(" "),i("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1,!1,!1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[i("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("Core Docs")])]),t._v(" "),i("li",[i("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("Forum")])]),t._v(" "),i("li",[i("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("Community Chat")])]),t._v(" "),i("li",[i("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("Twitter")])]),t._v(" "),i("br"),t._v(" "),i("li",[i("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("Docs for This Template")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("vue-router")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("vuex")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("vue-loader")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("awesome-vue")])])])}]},_=(i("VU/8")(p,g,!1,function(t){i("mMT3")},"data-v-f02e7390",null).exports,i("GQaK")),m={name:"BookRead",data:function(){return{contentList:[],contentIndex:0,contentsTitle:"",chapterList:[],contentsShow:!1,barShow:!1,fontSize:16,disableClick:!1,colorActive:"default",configShow:!1,chapterId:"",pageToGo:1}},computed:{content:function(){if(this.contentList[this.contentIndex])return this.contentList[this.contentIndex].content},chapterName:function(){if(this.contentList[this.contentIndex])return this.contentList[this.contentIndex].chapterName}},filters:{},methods:{showContents:function(t){var e=this;this.contentsShow=t,this.$nextTick(function(){e.$refs.contentsScroll.refresh()})},goBack:function(){this.$router.go(-1)},clickRoot:function(t){if(!this.disableClick)if(this.configShow&&(this.configShow=!1),this.barShow)this.barShow=!1;else{var e=this.boxWidth+40,i=t.clientX,s=(t.clientY,.15*e),o=this.slider.getCurrentPage().pageX;i<s?this.slider.goToPage(o-1,0,200):i>e-s?this.slider.goToPage(o+1,0,200):this.barShow=!0}},addFontSize:function(){this.fontSize>=28||(this.fontSize+=2,this._initWidth(),this.slider.refresh())},reduceFontSize:function(){this.fontSize<=12||(this.fontSize-=2,this._initWidth(),this.slider.refresh(),this.pageX>=this.pageLength-1&&this.slider.goToPage(this.pageLength-2,0,0))},changeColor:function(t){this.colorActive=t},showConfig:function(){this.configShow=!0},_initWidth:function(){this.contentWidth=this.$refs.content.scrollWidth,this.boxWidth=this.$refs.box.clientWidth,this.pageSize=(this.contentWidth+20)/(this.boxWidth+20);var t=this.$refs.scrollContent,e=2;"first"===this.prevId&&(e-=1),"last"===this.nextId&&(e-=1),this.pageLength=this.pageSize+e,t.style.width=this.pageLength*(this.boxWidth+20)+"px"},_initSlide:function(){var t=this;this.slider?this.slider.refresh():(this.slider=new _.a(this.$refs.scrollWrapper,{scrollY:!1,scrollX:!0,momentum:!1,snap:{loop:!1,threshold:.1,speed:400},click:!1,preventDefault:!1}),this.slider.on("scrollEnd",function(){var e=t.slider.getCurrentPage().pageX;t.pageX=e,e===t.pageLength-1&&"last"!==t.nextId&&t._goNext(),0===e&&"first"!==t.prevId&&t._goPrev()}))},_getAside:function(){this.pageToGo=1,0===this.index?(this.$refs.box.style.left=0,this.pageToGo=0):this.$refs.box.style.left="",this.index,this.chapterList.length},_getData:function(t){var e=this;return new d.a(function(i,o){s(e.bookId,e.chapterId).then(function(s){e.bookInfo=s.data.bookInfo,e.chapterInfo=s.data.chapterInfo,t?e.contentList.unshift(e.chapterInfo):e.contentList.push(e.chapterInfo),e.nextId=e.chapterInfo.next,e.prevId=e.chapterInfo.prev,e.$nextTick(function(){i()})})})},_initData:function(){var t=this;console.log(this.$route.params),this.bookId=this.$route.params.bookId,this.chapterId=this.$route.params.chapterId,this.contentIndex=0,this._getData().then(function(){t._initWidth(),t._initSlide(),t.slider.goToPage(t.pageToGo,0,0)})},_goNext:function(){var t=this;this.slider.disable(),this.pageToGo=1,this.contentIndex++,this.chapterId=this.nextId,this.contentList[this.contentIndex]?(this._initWidth(),this._initSlide(),this.slider.goToPage(this.pageToGo,0,0),this.slider.enable()):this._getData().then(function(){t._initWidth(),t._initSlide(),t.slider.goToPage(t.pageToGo,0,0),t.slider.enable()}),this.$router.replace("/book/"+this.bookId+"/"+this.chapterId)},_goPrev:function(){var t=this;-1!==this.prevId&&(this.slider.disable(),this.chapterId=this.prevId,this.contentList[this.contentIndex-1]?(this.contentIndex--,this._initWidth(),this._initSlide(),this.pageToGo=this.pageLength-2,this.slider.goToPage(this.pageToGo,0,0),this.slider.enable()):this._getData(!0).then(function(){t._initWidth(),t._initSlide(),t.pageToGo=t.pageLength-2,t.slider.goToPage(t.pageToGo,0,0),t.slider.enable()}),this.$router.replace("/book/"+this.bookId+"/"+this.chapterId))}},created:function(){this._initData()},components:{}},b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"root",staticClass:"book-read",class:t.colorActive,on:{click:t.clickRoot}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.barShow,expression:"barShow"}],staticClass:"top-bar",on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"back",on:{click:t.goBack}},[i("i",{staticClass:"icon-back"})]),t._v(" "),t._m(0,!1,!1)]),t._v(" "),i("div",{staticClass:"title"},[t._v(t._s(t.chapterName))]),t._v(" "),i("div",{staticClass:"stage-wrapper"},[i("div",{staticClass:"stage"},[i("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper"},[i("div",{ref:"scrollContent",staticClass:"scroll-content"},[i("div",{ref:"box",staticClass:"box"},[i("div",{ref:"content",staticClass:"content",style:{fontSize:t.fontSize+"px"}},[i("h4",{staticClass:"content-title"},[t._v(t._s(t.chapterName))]),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.content)}})])])])])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.barShow,expression:"barShow"}],staticClass:"bottom-bar",on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"item contents",on:{click:function(e){t.showContents(!0)}}},[i("div",{staticClass:"icon-catalog"}),t._v(" "),i("div",{staticClass:"text"},[t._v("目录")])]),t._v(" "),t._m(1,!1,!1),t._v(" "),i("div",{staticClass:"item config",on:{click:t.showConfig}},[i("div",{staticClass:"icon-set"}),t._v(" "),i("div",{staticClass:"text"},[t._v("设置")])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.configShow,expression:"configShow"}],staticClass:"config-wrapper"},[i("div",{staticClass:"font"},[i("div",{staticClass:"button reduce",on:{click:function(e){e.stopPropagation(),t.reduceFontSize(e)}}},[t._v("A-")]),t._v(" "),i("div",{staticClass:"text"},[t._v(t._s(t.fontSize))]),t._v(" "),i("div",{staticClass:"button add",on:{click:function(e){e.stopPropagation(),t.addFontSize(e)}}},[t._v("A+")])]),t._v(" "),i("ul",{staticClass:"color"},[i("li",{staticClass:"item default",class:{active:"default"===t.colorActive},on:{click:function(e){t.changeColor("default")}}}),t._v(" "),i("li",{staticClass:"item white",class:{active:"white"===t.colorActive},on:{click:function(e){t.changeColor("white")}}}),t._v(" "),i("li",{staticClass:"item dark",class:{active:"dark"===t.colorActive},on:{click:function(e){t.changeColor("dark")}}},[i("i",{staticClass:"icon-mode"})])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"share"},[e("i",{staticClass:"icon-share"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item percent"},[e("div",{staticClass:"icon-process icon"}),this._v(" "),e("div",{staticClass:"text"},[this._v("进度")])])}]},k=i("VU/8")(m,b,!1,function(t){i("p1HO")},"data-v-81d42f28",null).exports;o.a.use(r.a);var C=new r.a({routes:[{path:"/book/:bookId/:chapterId",name:"book",component:k},{path:"/",redirect:"/book/3516230/84649702"}]});i("34KM");o.a.config.productionTip=!1,new o.a({el:"#app",router:C,template:"<App/>",components:{App:a}})},mMT3:function(t,e){},p1HO:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a336e231db4236c1c4de.js.map